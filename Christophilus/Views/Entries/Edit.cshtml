@model Christophilus.Models.JournalEntry

@{
    ViewBag.Title = "Edit " + Model.Day;
}

@DefineBlock("head").As(@<text>
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.2.min.js" type="text/javascript"></script>
  
  @(new MvcHtmlString(Bundle.JavaScript()
      .Add("~/Scripts/textarea.autosize.js")
      .Add("~/Scripts/Editor.js")
      .Add("~/Scripts/RemoteSaver.js")
      .Add("~/Scripts/LocalSaver.js")
      .Add("~/Scripts/SaverSync.js")
      .Add("~/Scripts/Nav.js")
      .Render("~/Scripts/edit_#.js")))
</text>)

@DefineBlock("navigation").As(@<div id="main-navigation">
    <a href="#" id="status">Saved</a> 
    <a href="@Url.Action("Index")" title="List"><img src="@Href("~/Content/img/list.png")" alt="List" /></a>
    <a href="#" id="user-options">@ViewBag.UserEmail</a>
    <a id="logout-link" href="@Url.Action("Logout", "Authentication")">Logout</a>
</div>)

<h1 class="editing-title">@Model.Day</h1>
<textarea rows="10" cols="10" id="editable-entry" version="@Model.Version" save-action="@Url.Action("Update", "Entries", new { day = Model.Day })" day="@Model.Day" class="entry-body autosize">@(new MvcHtmlString(Model.Body))</textarea>